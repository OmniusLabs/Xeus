stages:
  - test

test_windows_job:
  stage: test
  tags: 
    - windows
  only:
    - master
    - develop
  script: 
    - chcp 65001
    - cd "%CI_PROJECT_DIR%"
    - call run-test.cmd
  artifacts:
    paths:
      - publish
  variables:
    GIT_SUBMODULE_STRATEGY: recursive

test_linux_job:
  image: mcr.microsoft.com/dotnet/core/sdk:3.0
  stage: test
  tags: 
    - linux
  only:
    - master
    - develop
  script: 
    - cd "$CI_PROJECT_DIR"
    - sh run-test.sh
  artifacts:
    paths:
      - publish
  variables:
    GIT_SUBMODULE_STRATEGY: recursive
